---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import A from "@/components/mdx/a.astro";
import Blockquote from "@/components/mdx/blockquote.astro";
import Image from "@/components/mdx/image.astro";
import { Separator } from "@/components/ui/separator";
import Layout from "@/layouts/layout.astro";
import { Github } from "lucide-astro";

interface Props {
	post: CollectionEntry<"projects">;
}

export async function getStaticPaths() {
	const blogPosts = await getCollection("projects");
	return blogPosts.map((post) => ({
		params: { slug: post.slug },
		props: { post },
	}));
}
const { post } = Astro.props;
const { Content } = await post.render();
---
 
 <Layout title={post.data.title}>
  <div class="container-page pb-14 pt-10">
    <div class="space-y-3">
      <h1 class="text-balance text-4xl font-semibold tracking-tight">{post.data.title}</h1>
      <p class="max-w-2xl text-base leading-relaxed text-foreground/70">{post.data.subtitle}</p>
      {post.data.github && (
        <div>
          <a
            class="inline-flex items-center gap-2 rounded-md px-2 py-1 text-sm text-foreground/70 hover:bg-foreground/5 hover:text-foreground"
            href={post.data.github}
            target="_blank"
            rel="noreferrer"
          >
            <Github class="size-4" />
            <span class="font-medium">Source</span>
          </a>
        </div>
      )}
      <Separator className="mt-4" />
    </div>
    <div class="prose prose-neutral max-w-none pt-6 dark:prose-invert prose-headings:tracking-tight prose-a:text-foreground prose-a:underline-offset-4 prose-pre:bg-transparent prose-code:text-foreground">
      <Content 
        components={{
          a: A,
          blockquote: Blockquote,
          img: Image,
        }}
      />
    </div>
  </div>
</Layout>
